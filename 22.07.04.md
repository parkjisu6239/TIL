# fork()와 exec()의 차이

## 프로세스의 생성
프로세스가 생성될 때 OS는 프로세스를 생성하기 위한 준비가 필요하다. 그 준비란 다음과 같다.
1. 파일 읽기
2. PCB 생성(PID,...)
3. 가상 메모리 할당
4. 접근 권한 부여
5. ...

간단해보이지만, OS 입장에서 프로세스를 생성하는데 거쳐야 하는 일련의 과정을 훨씬 복잡하다. 그렇기 떄문에 프로세스를 완전히 새로 생성해서 실행시킬 준비를 하기까지 걸리는 수고로움을 줄이기 위해 리눅스 계열의 운영체제에서는 특별한 명령어를 통해 이 과정을 좀 더 빠르게 수행한다.


## fork()
`fork` 는 복붙이다. 새로운 프로세스를 생성하기 위해 기존의 프로세스를 복붙한다. 가상메모리, PCB, 등등을 전체 복붙한 후에 새로운 메모리가 사용할 내용을 덮어쓰기 한다.

즉, 기존 프로세스 복붙 + 새로운 프로세스 내용으로 덮어쓰기이다. 결과적으로 **새로운 프로세스가 하나 더 생기는 것이다.**

## exec()
`exec` 는 덮어쓰기이다. 프로세스간에도 부모 자식간의 관계가 있다. 특정 프로세스가 수행되다가 자식 프로세스를 호출하고, 부모 프로세스가 종료되는 경우가 있다.
이때 해야할 작업은 `1. 기존 프로세스 종료하기` `2. 새로운 프로세스 생성하기 이다.`
하지만, 이떄 `exec` 를 사용하면 `기존 프로세스에 새로운 프로세스 내용 덮어쓰기` 한 번으로 작업을 줄일 수 있다.
프로세스 생성 및 종료는 덮어쓰는 것보다 오버헤드가 훨씬 크다. 그렇기 떄문에 시간적으로 많은 효율성을 취할 수 있다.

즉, 기존 프로세스에 새로운 프로세스를 덮어 쓰기이며, **새로운 프로세스가 생성되지 않는다.** 이때 새로운 프로세스는 기존 프로세스의 가상 메모리 공간과 PID등 일정 부분은 그대로 사용한다.

## Reference
- https://www.youtube.com/watch?v=RzN18na94Wc
- https://woochan-autobiography.tistory.com/207